import logging

# 設定日誌紀錄器
logging.basicConfig(filename='app.log', level=logging.INFO)

# 在處理地理位置訊息的函式中記錄日誌
@handler.add(MessageEvent, message=LocationMessage)
def handle_location_message(event):
    lat = event.message.latitude
    lng = event.message.longitude
    
    # 記錄地理位置訊息到日誌檔案中
    logging.info("Received location message: Latitude {}, Longitude {}".format(lat, lng))

    restaurant = search_nearby_restaurant(lat, lng)
    if restaurant:
        reply_text = f"I found a nearby restaurant: {restaurant['name']}, Address: {restaurant['address']}"
    else:
        reply_text = "Sorry, no restaurant found nearby"
    
    # 記錄回覆訊息到日誌檔案中
    logging.info("Replying message: {}".format(reply_text))

    line_bot_api.reply_message(event.reply_token, TextSendMessage(text=reply_text))
